<!-- breadcrumb-section -->
<div class="breadcrumb-section breadcrumb-bg">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 offset-lg-2 text-center">
        <div class="breadcrumb-text">
          <p>Fresh and Organic</p>
          <h1>Cart</h1>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- end breadcrumb section -->
<!-- cart -->
<div class="cart-section mt-150 mb-150">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-12">
        <div class="cart-table-wrap">
          <table class="cart-table">
            <thead class="cart-table-head">
              <tr class="table-head-row">
                <th class="product-remove"></th>
                <th class="product-image">Product Image</th>
                <th class="product-name">Name</th>
                <th class="product-price">Price</th>
                <th class="product-quantity">Quantity</th>
                <th class="product-total">Total</th>
              </tr>
            </thead>
            <tbody>
              <% if @cart && @cart.cart_items.any? %>
                <% @cart.cart_items.each do |item| %>
                  <tr class="table-body-row">
                    <!-- Remove Button -->
                    <td class="product-remove">
                      <%= button_to cart_item_path(item),
              method: :delete,
              form: { style: "display:inline;" },
              class: "delete-btn" do %>
                        <i class="far fa-window-close"></i>
                      <% end %>
                    </td>
                    <!-- Product Image -->
                    <td class="product-image">
                      <%= image_tag(item.product.image_path.presence || "assets/img/default-product.jpg") %>
                    </td>
                    <!-- Product Name -->
                    <td class="product-name">
                      <%= item.product.name %>
                    </td>
                    <!-- Price -->
                    <td class="product-price">
                      $<%= item.price_at_time %>
                    </td>
                    <!-- Quantity -->
                    <td class="product-quantity">
                      <%= item.quantity %>
                    </td>
                    <!-- Total -->
                    <td class="product-total">
                      $<%= item.quantity * item.price_at_time %>
                    </td>
                  </tr>
                <% end %>
              <% else %>
                <tr>
                  <td colspan="6">Your cart is empty.</td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>
      </div>
      <div class="col-lg-4">
        <div class="total-section">
          <table class="total-table">
            <thead class="total-table-head">
              <tr class="table-total-row">
                <th>Total</th>
                <th>Price</th>
              </tr>
            </thead>
            <tbody>
              <tr class="total-data">
                <td><strong>Subtotal: </strong></td>
                <td>$500</td>
              </tr>
              <tr class="total-data">
                <td><strong>Shipping: </strong></td>
                <td>$20</td>
              </tr>
              <tr class="total-data">
                <td><strong>Total: </strong></td>
                <td>$<%= @cart.cart_items.sum { |item| item.quantity * item.price_at_time } if @cart %></td>
              </tr>
            </tbody>
          </table>
          <div class="cart-buttons">
            <a href="cart.html" class="boxed-btn">Update Cart</a>
            <a href="checkout.html" class="boxed-btn black">Check Out</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- end cart -->